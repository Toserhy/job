<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>emmm</title>
    <script src="https://cdn.tailwindcss.com/3.4.3"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/heroicons/2.1.3/24/outline/heroicons.min.css">
    <style>
        /* * Apple iOS 18 Design System
         * 字体: 使用 Apple 平台默认的 San Francisco 字体系列，提供优雅降级。
         * 视觉风格: 强调清晰度、深度和响应式交互。
        */
        :root {
            --ios-background-color: #f2f2f7;
            --ios-secondary-background-color: #ffffff;
            --ios-grouped-background-color: #f2f2f7;
            --ios-blue-accent: #007aff;
            --ios-green-accent: #34c759;
            --ios-orange-accent: #ff9500;
            --ios-red-accent: #ff3b30;
            --ios-gray-text: #8e8e93;
            --ios-light-gray-border: rgba(60, 60, 67, 0.29);
            --border-radius: 12px; /* iOS 标准圆角 */
            --transition-curve: cubic-bezier(0.25, 0.1, 0.25, 1);
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji";
            background-color: var(--ios-background-color);
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        
        /* 新增：极光背景效果 (Aurora Background) */
        #background-aurora {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            z-index: -1; /* 置于所有内容之后 */
            opacity: 0.3; /* 调整透明度以保持微妙感 */
            background: 
                /* 创建三个模糊的径向渐变色块 */
                radial-gradient(circle at 15% 25%, rgba(88, 122, 255, 0.4) 0%, rgba(88, 122, 255, 0) 25%),
                radial-gradient(circle at 85% 35%, rgba(212, 153, 255, 0.4) 0%, rgba(212, 153, 255, 0) 25%),
                radial-gradient(circle at 50% 70%, rgba(255, 175, 204, 0.4) 0%, rgba(255, 175, 204, 0) 20%);
            filter: blur(100px); /* 高斯模糊使色块融合 */
            transform: translateZ(0); /* 硬件加速 */
        }


        /* 玻璃拟态效果 (Glassmorphism) for sticky header/search */
        .glassmorphism {
            background-color: rgba(255, 255, 255, 0.8);
            backdrop-filter: saturate(180%) blur(20px);
            -webkit-backdrop-filter: saturate(180%) blur(20px);
        }
        
        /* 交互动效: 表格行淡入 */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(8px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .fade-in-row {
            animation: fadeIn 0.5s var(--transition-curve) both;
        }

        /* 自定义表格滚动条样式 */
        .table-container::-webkit-scrollbar {
            width: 6px;
        }
        .table-container::-webkit-scrollbar-track {
            background: transparent;
        }
        .table-container::-webkit-scrollbar-thumb {
            background-color: rgba(0, 0, 0, 0.2);
            border-radius: 3px;
        }
        .table-container::-webkit-scrollbar-thumb:hover {
            background-color: rgba(0, 0, 0, 0.3);
        }

        /* 表格粘性表头样式 */
        .sticky-header {
            position: sticky;
            top: 0;
            z-index: 10;
        }
    </style>
</head>
<body class="text-gray-800">
    <div id="background-aurora"></div>

    <header class="sticky top-0 z-30 border-b border-gray-200/80 glassmorphism">
    <div class="container mx-auto px-4 md:px-6 py-4">
        <div class="flex items-center space-x-4">
            
            <div class="w-16 h-16 rounded-3xl shadow-md overflow-hidden">
                <img src="https://pic1.imgdb.cn/item/64ed8226661c6c8e540e2202.jpg" alt="网站Logo" class="w-full h-full object-cover">
            </div>
            <div class="flex justify-between items-end w-full">
    
                <div>
                    <h1 class="text-2xl md:text-3xl font-bold tracking-tight text-gray-900">校招HUB | Toserhy</h1>
                    <p class="text-sm text-gray-500 mt-1">孩子们，你还在等你的学校为你解决就业么？</p>
                </div>
            
                <p class="text-sm text-gray-400 italic pb-1">（说明：本站半自动抓取各类最新校招信息，旨在消灭信息差）</p>
            
            </div>
    </div>
</header>

    <main class="container mx-auto px-4 md:px-6 py-8">
        <div class="bg-white rounded-2xl shadow-sm border border-gray-200/80 overflow-hidden">
            <div class="sticky top-[0px] z-20 p-4 md:p-6 border-b border-gray-200/80 glassmorphism">
                <div class="flex flex-col sm:flex-row gap-4 items-center justify-between">
                    <div class="relative flex-1 w-full max-w-lg">
                        <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
                            <svg class="h-5 w-5 text-gray-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                            </svg>
                        </div>
                        <input type="text" id="searchInput" placeholder="搜索公司、岗位或地点..."
                               class="w-full pl-11 pr-4 py-2.5 bg-gray-100 border border-transparent rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500 focus:bg-white transition duration-300">
                    </div>
                    <div class="flex items-center space-x-3 text-sm text-gray-600 shrink-0">
                        <span>共 <span id="totalJobs" class="font-semibold text-gray-800">0</span> 个岗位</span>
                        <span class="text-gray-300">•</span>
                        <span>每页 <span id="jobsPerPage" class="font-semibold text-gray-800">20</span> 条</span>
                    </div>
                </div>
            </div>

            <div class="table-container max-h-[65vh] overflow-y-auto">
                <table class="min-w-full">
                    <thead class="bg-gray-50/50 sticky-header border-b border-gray-200/80">
                        <tr>
                            <th class="px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider">公司</th>
                            <th class="px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider">类型</th>
                            <th class="px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider">行业</th>
                            <th class="px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider">地点</th>
                            <th class="px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider">岗位</th>
                            <th class="px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider">进度</th>
                            <th class="px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider">截止日期</th>
                            <th class="px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider">操作</th>
                        </tr>
                    </thead>
                    <tbody id="jobTableBody" class="divide-y divide-gray-200/80">
                        </tbody>
                </table>
            </div>

            <div id="pagination" class="flex justify-center items-center p-4 border-t border-gray-200/80 space-x-2">
                </div>
        </div>
    </main>

    <script src="job-data.js"></script> <script>
        document.addEventListener('DOMContentLoaded', () => {
            let currentPage = 1;
            const jobsPerPage = 20;

            let filteredJobs = [...jobData];

            const tableBody = document.getElementById('jobTableBody');
            const searchInput = document.getElementById('searchInput');

            const init = () => {
                applySearchFilter();
                setupEventListeners();
            };

            const applySearchFilter = () => {
                const searchTerm = searchInput.value.toLowerCase();
                filteredJobs = jobData.filter(job => 
                    job.company.toLowerCase().includes(searchTerm) ||
                    job.position.toLowerCase().includes(searchTerm) ||
                    job.industry.toLowerCase().includes(searchTerm) ||
                    job.location.toLowerCase().includes(searchTerm)
                );
                filteredJobs = filteredJobs.reverse();
                currentPage = 1;
                updatePage();
            };
            

            const updatePage = () => {
                document.getElementById('totalJobs').textContent = filteredJobs.length;
                renderTable();
                renderPagination();
            };

            const renderTable = () => {
                tableBody.innerHTML = ''; // 清空现有内容
                const startIndex = (currentPage - 1) * jobsPerPage;
                const endIndex = startIndex + jobsPerPage;
                const jobsToDisplay = filteredJobs.slice(startIndex, endIndex);
                
                if (jobsToDisplay.length === 0) {
                    tableBody.innerHTML = `<tr><td colspan="8" class="text-center py-16 text-gray-500">无匹配的招聘信息</td></tr>`;
                    return;
                }

                jobsToDisplay.forEach((job, index) => {
                    const row = document.createElement('tr');
                    row.className = 'fade-in-row hover:bg-gray-50 transition-colors duration-200';
                    row.style.animationDelay = `${index * 50}ms`;

                    const statusPill = getStatusPill(job.status);
                    const companyLogo = getCompanyLogo(job.company);
                    
                    row.innerHTML = `
                        <td class="px-6 py-4 whitespace-nowrap">
                            <div class="flex items-center space-x-3">
                                ${companyLogo}
                                <span class="font-semibold text-gray-800">${job.company}</span>
                            </div>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-600">${job.type}</td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-600">${job.industry}</td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-600">${job.location}</td>
                        <td class="px-6 py-4 text-sm text-gray-600 max-w-xs truncate" title="${job.position}">${job.position}</td>
                        <td class="px-6 py-4 whitespace-nowrap">${statusPill}</td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-600">${job.deadline}</td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium space-x-4">
                            <a href="${job.applyLink}" target="_blank" class="text-blue-600 hover:text-blue-800 inline-flex items-center space-x-1 transition-colors">
                                <span>投递</span>
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-4 h-4"><path stroke-linecap="round" stroke-linejoin="round" d="m4.5 19.5 15-15m0 0H8.25m11.25 0v11.25" /></svg>
                            </a>
                            <a href="${job.announcementLink}" target="_blank" class="text-gray-500 hover:text-gray-700 transition-colors">公告</a>
                        </td>
                    `;
                    tableBody.appendChild(row);
                });
            };

            const renderPagination = () => {
                const paginationContainer = document.getElementById('pagination');
                paginationContainer.innerHTML = '';
                const totalPages = Math.ceil(filteredJobs.length / jobsPerPage);

                if (totalPages <= 1) return;

                // 上一页按钮
                const prevButton = createPageButton('←', currentPage > 1 ? currentPage - 1 : 1, currentPage === 1);
                paginationContainer.appendChild(prevButton);

                // 页码按钮
                for (let i = 1; i <= totalPages; i++) {
                    const pageButton = createPageButton(i, i, i === currentPage);
                    paginationContainer.appendChild(pageButton);
                }

                // 下一页按钮
                const nextButton = createPageButton('→', currentPage < totalPages ? currentPage + 1 : totalPages, currentPage === totalPages);
                paginationContainer.appendChild(nextButton);
            };

            const createPageButton = (text, page, isDisabledOrActive) => {
                const button = document.createElement('button');
                button.textContent = text;
                const baseClasses = 'px-3 py-1.5 text-sm font-medium rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500';
                
                if (typeof isDisabledOrActive === 'boolean' && text === currentPage.toString()) { // Active
                     button.className = `${baseClasses} bg-blue-500 text-white shadow-sm`;
                     button.disabled = true;
                } else if (isDisabledOrActive === true) { // Disabled
                     button.className = `${baseClasses} text-gray-400 cursor-not-allowed`;
                     button.disabled = true;
                } else { // Default
                    button.className = `${baseClasses} text-gray-600 hover:bg-gray-100`;
                    button.addEventListener('click', () => {
                        currentPage = page;
                        updatePage();
                    });
                }
                return button;
            };
            
            const getCompanyLogo = (companyName) => {
                const colors = ['bg-red-500', 'bg-green-500', 'bg-blue-500', 'bg-indigo-500', 'bg-purple-500', 'bg-pink-500', 'bg-orange-500'];
                const firstChar = companyName.charAt(0).toUpperCase();
                const colorIndex = firstChar.charCodeAt(0) % colors.length;
                return `<div class="w-8 h-8 rounded-lg flex-shrink-0 flex items-center justify-center text-white font-bold text-sm ${colors[colorIndex]}">${firstChar}</div>`;
            };

            const getStatusPill = (status) => {
                let pillClass = 'px-2.5 py-0.5 inline-flex text-xs leading-5 font-semibold rounded-full';
                switch(status) {
                    case '已投递':
                        pillClass += ' bg-green-100 text-green-800';
                        break;
                    case '审核中':
                        pillClass += ' bg-yellow-100 text-yellow-800';
                        break;
                    case '未投递':
                    default:
                        pillClass += ' bg-gray-100 text-gray-800';
                }
                return `<span class="${pillClass}">${status}</span>`;
            };

            const setupEventListeners = () => {
                let debounceTimer;
                searchInput.addEventListener('input', () => {
                    clearTimeout(debounceTimer);
                    debounceTimer = setTimeout(applySearchFilter, 300); // 防抖
                });
            };

            init();
        });
    </script>
</body>
</html>